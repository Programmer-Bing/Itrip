<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cssl.pojo.dao.HomePage_productDao">

    <!--<select id="findAll" resultType="homepage_product">
        SELECT p.P_id AS "product_id",p.P_name AS "product_name",p.P_imgpath AS "product_imgPath",p.P_price AS "product_price"
        FROM product p
    </select>
    <select id="findByCPT" resultType="homepage_product" parameterType="map">
        SELECT p.P_id AS "product_id",p.P_name AS "product_name",p.P_imgpath AS "product_imgPath",p.P_price AS "product_price",
               c.Country_name AS "Country_name",pt.PT_name AS "ProductType_name" FROM product p INNER JOIN country c ON p.P_cid=c.Country_id
                                                                                                INNER JOIN preducttype pt ON p.P_ptid=pt.PT_id
        <trim prefixOverrides="AND || OR" prefix="where">
            <if test="Country_name!=null and Country_name!=''"> and Country_name = #{Countrt_name}</if>
            <if test="ProductType_name!=null and ProductType_name!=''"> and PT_name = #{ProductType_name}</if>
        </trim>
    </select>-->
<select id="findBargains" parameterType="int" resultType="homepage_product">
    SELECT p.`Product_id` AS "product_id",p.`Product_Name` AS "product_name",p.P_imgpath AS "product_imgPath",p.P_price AS "product_price"
    FROM product p INNER JOIN preferentialactivities pre ON p.`Product_id`=pre.`Product_id`
                        INNER JOIN citiesstates c ON c.`cs_id`=p.p_cid
                        INNER JOIN smallplate s ON c.`sp_id`=s.`sp_id`
                        INNER JOIN largeplate l ON s.`lp_id`=l.`lp_id` WHERE l.`lp_id` = #{lp_id}
</select>
</mapper>
